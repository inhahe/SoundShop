cmake_minimum_required(VERSION 3.15)
project(juce_audio_bindings VERSION 1.0.0)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Find Python and pybind11
find_package(Python COMPONENTS Interpreter Development REQUIRED)
find_package(pybind11 REQUIRED)

# Python module - no JUCE dependencies needed
pybind11_add_module(juce_audio python_bindings.cpp)

# Windows-specific
if(WIN32)
    set_target_properties(juce_audio PROPERTIES 
        SUFFIX ".pyd"
        MSVC_RUNTIME_LIBRARY "MultiThreadedDLL"
    )
endif()

# Compiler flags
if(MSVC)
    target_compile_options(juce_audio PRIVATE /EHsc)
endif()